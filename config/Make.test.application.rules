# **********************************************************************
#
# Copyright (c) 2003-2015 ZeroC, Inc. All rights reserved.
#
# This copy of Ice is licensed to you under the terms described in the
# ICE_LICENSE file included in this distribution.
#
# **********************************************************************

LOCAL_TESTDIR		= ice/$(LOCAL_PATH)
LOCAL_SLICEDIR		= $(LOCAL_TESTDIR)
LOCAL_SRCDIR		= $(LOCAL_TESTDIR)
LOCAL_BINDIR		= $(LOCAL_PATH)

LOCAL_SRCS		:= $(addprefix $(LOCAL_SRCDIR)/,$(LOCAL_SRCS))
LOCAL_MODULE		= $(subst /,_,$(LOCAL_PATH))_$(LOCAL_EXE)

LOCAL_LINK_WITH		+= Ice
LOCAL_CPPFLAGS		+= -Iice/cpp/test/include -I$(LOCAL_PATH) -I$(LOCAL_SRCDIR)
LOCAL_SLICE2CPPFLAGS	+= -I$(LOCAL_SLICEDIR)


ifneq ($(wildcard $(LOCAL_TESTDIR)/run.py),)
TARGETS := $(TARGETS) $(LOCAL_PATH)/run.py
endif

include $(APPLICATION_RULES)


test_compile: $(LOCAL_BINDIR)/$(LOCAL_EXE)
test_clean: $(LOCAL_MODULE)_clean

ifneq ($(LOCAL_RESOURCES),)
test_resources: $(LOCAL_RESOURCES)
endif